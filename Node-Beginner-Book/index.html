<!DOCTYPE html>
<html>

<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<style>    
    #ShowImage,
  	#TextShellCmd,
  	#ShellCmd,
  	#asyncbtn,
	#clearOutput,
	#gmailbtn,
	#gpio-on,
	#gpioPin,
	#gpio-off,
	#gmailOut,
	#getbtn,
	#postbtn
	{
		width:150px;
    	height:30px;
	}
</style>
</head>
<body>
<h1>Raspi-Demo</h1>

<!-- HTTP Get/Post -->
<fieldset style="width:310px">
    <legend>GET/POST</legend>
    <button id="getbtn" >GET</button>
    <button id="postbtn">POST</button>
</fieldset>

<fieldset style="width:625px">
	<input id="gmailOut" type="text" values="">
	<button id="gmailbtn" >Gmail Check</button>
</fieldset>

<fieldset style="width:625px">
    <legend>GPIO</legend>
    <input id="gpioPin" type="text" value="16">
    <button id="gpio-on" >GPIO ON</button>
    <button id="gpio-off">GPIO OFF</button>
</fieldset>

<fieldset style="width:625px">
    <legend>Shell</legend>
    <input id="TextShellCmd" type="text">
    <button id="ShellCmd">ENTER</button>
    <button id="asyncbtn" >async Test (find /)</button>
    <button id="clearOutput">CLEAR</button>    
    <textarea id="output" rows="20" cols="75" readonly="true" maxlength="2000*1024"></textarea>
</fieldset>

<fieldset style="width:625px">
    <form id="my_form" action="/upload" enctype="multipart/form-data" method="post">
		<input id="uploadFile" type="file" name="upload" />
	  	<input id="uploadbtn" type="submit" value="Send" />
	</form>
</fieldset>

<script>
$(function() {
	$("#gpio-on").click(function() {	
		$.get("/gpio",								// url
			{ pin: $("#gpioPin").val(), act: '1'},	// data
			null);									// callback
	});
	
	$("#gpio-off").click(function() {
		$.get("/gpio",								// url
			{ pin: $("#gpioPin").val(), act: '0'},	// data
			null);									// callback
	});

	$("#ShellCmd").click(function() {
		$.get("/shell",								// url
			{ cmd: $("#TextShellCmd").val()},		// data
			function(data, state) {					// callback
				$("#output").val(data);
			});
    });

    $("#clearOutput").click(function() {
    	$("#output").val("");
    	$("#TextShellCmd").val("");
    });

    $("#TextShellCmd").keypress(function (event) {
		if (event.which == 13) {
			$.get("/shell",							// url
				{ cmd: $("#TextShellCmd").val()},	// data
				function(data, state) {				// callback
					$("#output").val(data);
				});
	        $("#TextShellCmd").val("");
	    }
    });

    $("#asyncbtn").click(function() {
    	$.get("/async",								// url
			{},										// data
			function(data, state) {					// callback
				$("#output").val(data);
			});
    });

    $("#gmailbtn").click(function() {
    	$("#gmailOut").val("");
    	$.get("/gmailcheck",						// url
			{},										// data
			function(data, state) {					// callback
				$("#gmailOut").val(data);
			});
    });
    
    $("#getbtn").click(function() {
    	$.get("/",									// url
			{cmd: "ls"},							// data
			null);									// callback
    });

    $("#postbtn").click(function() {
    	$.post("/",									// url
			{cmd: "ls"},							// data
			null);									// callback
    });

/*
    $("#uploadbtn").click(function() {
    	alert("hey");
		$.ajax({
	        url: "/attachmentURL",
	        type: "POST",
	        data: file,
	        processData: false
	    });
    })
*/  
});
</script>

</body>
</html>

<!--
<script type="text/javascript">
/*
function buildUrl(url, parameters) {
	var qs = "";
	for(var key in parameters) {
	  	var value = parameters[key];
	  	qs += encodeURIComponent(key) + "=" + encodeURIComponent(value) + "&";
	}
  	if (qs.length > 0){
    	qs = qs.substring(0, qs.length-1); //chop off last "&"
    	url = url + "?" + qs;
  	}
	return url;
}

function gpioCtrl(action) {
	if (0 === action.length) {
		action=1;
	}

	var url = "/gpio";
	var param = new Array();
	param = {pin: $("#gpioPin").val(), act: action};
	return buildUrl(url, param);
}

function shellCmdCtrl() {
	var cmd = $("#TextShellCmd").val();
	if (cmd) {
		var url = "/shell";
		var param = new Array();
		param = {cmd: cmd};
		return buildUrl(url, param);
	} else {
		return false;
	}
}
*/
</script>

$("#gpio-on").click(function(){
		location.href="http://192.168.1.190:3000/gpio?pin=16&act=1";
		//$(location).attr("href", "http://192.168.1.190:3000/gpio?pin=16&act=1");
	});

	$("#gpio-off").click(function(){
		location.href="http://192.168.1.190:3000/gpio?pin=16&act=0";
		//$(location).attr("href", "http://192.168.1.190:3000/gpio?pin=16&act=0");
	});
	$("#ShellCmd").click(function(){
		var url = "http://192.168.1.190:8888/list";
		var params = [
			"loc=/usr/bin"
		];
		(new Image()).src = url + "?" + params.join("&");
		//(new Image()).src = url;// + "?" + params.join("&");
	});

	$("#gpio-on").click(function(){
		var url = "http://192.168.1.190:8888/gpio";
		var params = [
			"pin=16",
			"act=1"
		];
		(new Image()).src = url + "?" + params.join("&");
	});
	
	$("#gpio-off").click(function(){
		var url = "http://192.168.1.190:8888/gpio";
		var params = [
			"pin=16",
			"act=0"
		];
		(new Image()).src = url + "?" + params.join("&");
	});
<--



