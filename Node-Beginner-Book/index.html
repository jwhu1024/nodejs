<!DOCTYPE html>
<html>

<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<style>
	#gpio-on,
	#gpio-off,
 	#TextShellCmd,
	#ShellCmd,
	#clearOutput,
    #gpioPin,
    #ShowImage { 
  		margin-right:0px;
    	width:200px;
    	height:30px;
  }
</style>
</head>

<body>
<h1>Raspi-Demo</h1>

<fieldset style="width:70%">
    <legend>GPIO</legend>
    <input id="gpioPin" type="text" value="16">
    <button id="gpio-on" >GPIO ON</button>
    <button id="gpio-off">GPIO OFF</button>
</fieldset>

<fieldset style="width:30%">
    <legend>Shell</legend>
    <input id="TextShellCmd" type="text">
    <button id="ShellCmd">ENTER</button>
    <button id="clearOutput">CLEAR</button>
    <textarea id="output" rows="20" cols="75" readonly="true"></textarea>
</fieldset>

<fieldset style="width:30%">
    <form id="my_form" action="/upload" enctype="multipart/form-data" method="post">
		<input type="file" name="upload" />
	  	<input type="submit" value="Send" />
	</form>
    <!--
    <form id="uploadForm" action="/upload" enctype="multipart/form-data" method="post">
        <input type="file" name="upload">
        <input type="submit" value="Upload file">
        <button id="uploadbtn">UPLOAD!!</button>
    </form>
    -->
</fieldset>

<script>
$(function() {
	$("#gpio-on").click(function() {	
		$.get("/gpio",								// url
			{ pin: $("#gpioPin").val(), act: '1'},	// data
			null);									// callback
	});
	
	$("#gpio-off").click(function() {
		$.get("/gpio",								// url
			{ pin: $("#gpioPin").val(), act: '0'},	// data
			null);									// callback
	});

	$("#ShellCmd").click(function() {
		$.get("/shell",								// url
			{ cmd: $("#TextShellCmd").val()},		// data
			function(data, state) {					// callback
				$("#output").val(data);
			});
    });

    $("#clearOutput").click(function() {
    	$("#output").val("");
    	$("#TextShellCmd").val("");
    });

    $("#TextShellCmd").keypress(function (event) {
		if (event.which == 13) {
			$.get("/shell",								// url
				{ cmd: $("#TextShellCmd").val()},		// data
				function(data, state) {					// callback
					$("#output").val(data);
				});
	        $("#TextShellCmd").val("");
	    }
    });

});
</script>

</body>
</html>

<!--
<script type="text/javascript">
/*
function buildUrl(url, parameters) {
	var qs = "";
	for(var key in parameters) {
	  	var value = parameters[key];
	  	qs += encodeURIComponent(key) + "=" + encodeURIComponent(value) + "&";
	}
  	if (qs.length > 0){
    	qs = qs.substring(0, qs.length-1); //chop off last "&"
    	url = url + "?" + qs;
  	}
	return url;
}

function gpioCtrl(action) {
	if (0 === action.length) {
		action=1;
	}

	var url = "/gpio";
	var param = new Array();
	param = {pin: $("#gpioPin").val(), act: action};
	return buildUrl(url, param);
}

function shellCmdCtrl() {
	var cmd = $("#TextShellCmd").val();
	if (cmd) {
		var url = "/shell";
		var param = new Array();
		param = {cmd: cmd};
		return buildUrl(url, param);
	} else {
		return false;
	}
}
*/
</script>

$("#gpio-on").click(function(){
		location.href="http://192.168.1.190:3000/gpio?pin=16&act=1";
		//$(location).attr("href", "http://192.168.1.190:3000/gpio?pin=16&act=1");
	});

	$("#gpio-off").click(function(){
		location.href="http://192.168.1.190:3000/gpio?pin=16&act=0";
		//$(location).attr("href", "http://192.168.1.190:3000/gpio?pin=16&act=0");
	});
	$("#ShellCmd").click(function(){
		var url = "http://192.168.1.190:8888/list";
		var params = [
			"loc=/usr/bin"
		];
		(new Image()).src = url + "?" + params.join("&");
		//(new Image()).src = url;// + "?" + params.join("&");
	});

	$("#gpio-on").click(function(){
		var url = "http://192.168.1.190:8888/gpio";
		var params = [
			"pin=16",
			"act=1"
		];
		(new Image()).src = url + "?" + params.join("&");
	});
	
	$("#gpio-off").click(function(){
		var url = "http://192.168.1.190:8888/gpio";
		var params = [
			"pin=16",
			"act=0"
		];
		(new Image()).src = url + "?" + params.join("&");
	});
<--



